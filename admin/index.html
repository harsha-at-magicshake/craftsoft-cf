<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Start - Craft Soft</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background: #f8fafc;
        }

        .status-card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            text-align: center;
        }

        .status-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .online {
            background: #10b981;
            box-shadow: 0 0 8px #10b981;
        }

        .offline {
            background: #ef4444;
            box-shadow: 0 0 8px #ef4444;
        }

        .checking {
            background: #f59e0b;
        }
    </style>
</head>

<body>
    <div class="status-card">
        <h1 style="margin-top: 0;">Admin Fresh Start</h1>
        <p id="statusText">
            <span id="statusDot" class="status-dot checking"></span>
            Checking Supabase Connection...
        </p>
        <p style="font-size: 0.9rem; color: #64748b;">Ready to build from scratch.</p>
    </div>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase.js"></script>
    <script>
        async function checkConnection() {
            const dot = document.getElementById('statusDot');
            const text = document.getElementById('statusText');

            try {
                // Simple query to check connection
                const { data, error } = await window.supabase.from('settings').select('count').limit(1);

                if (error && error.code !== 'PGRST116') { // PGRST116 is just "no rows", which is fine
                    throw error;
                }

                dot.className = 'status-dot online';
                text.innerHTML = '<span class="status-dot online"></span> Supabase Connected Successfully';
            } catch (err) {
                console.error(err);
                dot.className = 'status-dot offline';
                text.innerHTML = '<span class="status-dot offline"></span> Connection Failed';
            }
        }

        document.addEventListener('DOMContentLoaded', checkConnection);
    </script>
</body>

</html>