function initNavbar(){const e=document.getElementById("navbar");window.addEventListener("scroll",()=>{window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled")})}function initMobileMenu(){const e=document.getElementById("hamburger"),t=document.getElementById("nav-menu"),n=document.getElementById("navClose"),i=document.getElementById("navOverlay");if(!e||!t)return;e.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("active"),i&&i.classList.toggle("active"),document.body.style.overflow=t.classList.contains("active")?"hidden":""}),n&&n.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("active"),i&&i.classList.remove("active"),document.body.style.overflow=""}),i&&i.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("active"),i.classList.remove("active"),document.body.style.overflow=""});t.querySelectorAll(".nav-link, .nav-admin-link").forEach(n=>{n.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("active"),i&&i.classList.remove("active"),document.body.style.overflow=""})})}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"===t)return;e.preventDefault();const n=document.querySelector(t);if(n){const e=document.getElementById("navbar").offsetHeight,t=n.offsetTop-e;window.scrollTo({top:t,behavior:"smooth"})}})})}function initScrollAnimations(){const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("animate-in")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".feature-card, .course-card, .service-card, .testimonial-card, .advantage-card, .contact-card, .faq-item").forEach(t=>{t.classList.add("animate-element"),e.observe(t)})}document.addEventListener("DOMContentLoaded",function(){initNavbar(),initMobileMenu(),initSmoothScroll(),initScrollAnimations(),initFAQ(),initActiveNavLink(),initCourseFilter(),initCurriculumTabs(),initShareCourse(),initCounterAnimation(),initTestimonialsSlider(),initContactForm(),initChatWidget()});const animationStyles=document.createElement("style");function initFAQ(){const e=document.querySelectorAll(".faq-item");e.forEach(t=>{t.querySelector(".faq-question").addEventListener("click",()=>{e.forEach(e=>{e!==t&&e.classList.contains("active")&&e.classList.remove("active")}),t.classList.toggle("active")})})}function initActiveNavLink(){const e=document.querySelectorAll("section[id]"),t=document.querySelectorAll(".nav-link");window.addEventListener("scroll",()=>{let n="";const i=document.getElementById("navbar").offsetHeight;e.forEach(e=>{const t=e.offsetTop-i-100,a=e.offsetHeight;window.scrollY>=t&&window.scrollY<t+a&&(n=e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active");const t=e.getAttribute("href");(t===`#${n}`||t.includes("#")&&t.endsWith(`#${n}`))&&e.classList.add("active")})})}function initCourseFilter(){const e=document.querySelectorAll(".filter-tab"),t=document.querySelectorAll(".course-category");if(0===e.length||0===t.length)return;e.forEach(n=>{n.addEventListener("click",()=>{e.forEach(e=>e.classList.remove("active")),n.classList.add("active");const i=n.getAttribute("data-filter");t.forEach(e=>{if("all"===i)e.classList.remove("hidden");else{e.getAttribute("data-category")===i?e.classList.remove("hidden"):e.classList.add("hidden")}});const a=document.querySelector(".courses-page")||document.querySelector(".services-page");if(a){const e=document.getElementById("navbar")?.offsetHeight||0;window.scrollTo({top:a.offsetTop-e-20,behavior:"smooth"})}})});const n=new URLSearchParams(window.location.search).get("filter");if(n){const t=Array.from(e).find(e=>e.getAttribute("data-filter")===n);t&&setTimeout(()=>t.click(),100)}}function initCounterAnimation(){const e=document.querySelectorAll(".stat-number[data-target]"),t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!e.target.classList.contains("counted")&&(e.target.classList.add("counted"),(e=>{const t=parseFloat(e.getAttribute("data-target")),n=e.hasAttribute("data-decimal"),i=performance.now(),a=o=>{const c=o-i,s=Math.min(c/2e3,1),r=1-Math.pow(1-s,4),l=t*r;e.textContent=n?l.toFixed(1):Math.floor(l),s<1?requestAnimationFrame(a):e.textContent=n?t.toFixed(1):t};requestAnimationFrame(a)})(e.target))})},{threshold:.5});e.forEach(e=>t.observe(e))}function initTestimonialsSlider(){const e=document.querySelector(".testimonials-slider");if(!e)return;const t=e.querySelectorAll(".testimonial-card");if(0===t.length)return;let n=0;const i=t.length;let a=e.querySelector(".testimonials-track");a||(a=document.createElement("div"),a.className="testimonials-track",t.forEach(e=>a.appendChild(e.cloneNode(!0))),e.innerHTML="",e.appendChild(a));const o=document.createElement("div");function c(){o.innerHTML="";const e=l(),t=i-e+1;if(!(t<=1))for(let e=0;e<t;e++){const t=document.createElement("button");t.className="slider-dot "+(e===n?"active":""),t.setAttribute("aria-label",`Go to slide ${e+1}`),t.addEventListener("click",()=>s(e)),o.appendChild(t)}}function s(e){n=e,r()}function r(){const e=100/l();a.style.transform=`translateX(-${n*e}%)`;o.querySelectorAll(".slider-dot").forEach((e,t)=>{e.classList.toggle("active",t===n)})}function l(){return window.innerWidth>=1024?3:window.innerWidth>=768?2:1}function d(){const e=l();n=n>=i-e?0:n+1,r()}o.className="slider-dots",e.appendChild(o),c();let u=setInterval(d,5e3);e.addEventListener("mouseenter",()=>clearInterval(u)),e.addEventListener("mouseleave",()=>{u=setInterval(d,5e3)}),window.addEventListener("resize",()=>{n=0,c(),r()})}function initContactForm(){const e=document.getElementById("contactForm")||document.getElementById("service-contact-form");if(!e)return;const t=e.querySelector('input[type="tel"]');t&&t.addEventListener("input",function(e){this.value=this.value.replace(/[^0-9]/g,"").slice(0,10)}),e.addEventListener("submit",async function(t){const n=e.querySelector('button[type="submit"]'),i=n.innerHTML;try{t.preventDefault(),n.disabled=!0,n.classList.add("btn-loading"),n.setAttribute("data-original-text",i),n.innerHTML='<span class="loading-spinner"></span> Sending...';const a=new FormData(e),o="service-contact-form"===e.id,c=o?"service":"course",s={name:a.get("name"),email:a.get("email"),phone:a.get("phone")||"-",subject:a.get("interest")||(o?"Service Inquiry":"Course Inquiry"),course:a.get("interest"),service:o?a.get("interest"):null,message:a.get("message"),status:"new",type:c,source:"website",createdAt:(new Date).toISOString()};let r=!1;try{r=(await fetch(e.action,{method:"POST",body:a,headers:{Accept:"application/json"}})).ok}catch(e){console.error("Formspree submission failed:",e)}const l=e.closest(".contact-form-card")||document.querySelector(".contact-form-wrapper");if(l){const e=r?`Thank you for reaching out, <strong>${s.name}</strong>. Your inquiry has been received and we'll get back to you shortly.`:`Thank you for reaching out, <strong>${s.name}</strong>. If you don't hear from us soon, please contact us directly via WhatsApp or phone.`;l.innerHTML=`\n                    <div class="success-message-container" style="text-align: center; padding: 40px; animation: fadeIn 0.5s ease;">\n                        <div class="success-icon" style="width: 80px; height: 80px; background: rgba(0, 184, 148, 0.1); color: #00B894; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 2.5rem;">\n                            <i class="fas fa-check"></i>\n                        </div>\n                        <h3 style="margin-bottom: 10px; font-size: 1.5rem; color: var(--text-dark);">Inquiry Received!</h3>\n                        <p style="color: var(--text-light); line-height: 1.6; margin-bottom: 20px;">${e}</p>\n                        <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">\n                            <button class="btn btn-outline" style="margin-top: 0;" onclick="window.location.reload()">Send Another Message</button>\n                            <a href="https://wa.me/917842239090?text=Hi! I just submitted an inquiry." target="_blank" class="btn btn-primary" style="margin-top: 0;">\n                                <i class="fab fa-whatsapp"></i> Contact on WhatsApp\n                            </a>\n                        </div>\n                    </div>\n                `}}catch(t){console.error("Error submitting form:",t);const a=e.closest(".contact-form-card")||document.querySelector(".contact-form-wrapper"),o='\n                <div style="text-align: center; padding: 40px; background: rgba(239, 68, 68, 0.1); border-radius: 12px; border: 1px solid rgba(239, 68, 68, 0.2);">\n                    <div style="width: 80px; height: 80px; background: rgba(239, 68, 68, 0.1); color: #EF4444; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 2.5rem;">\n                        <i class="fas fa-exclamation-triangle"></i>\n                    </div>\n                    <h3 style="margin-bottom: 10px; font-size: 1.5rem; color: var(--text-dark);">Something Went Wrong</h3>\n                    <p style="color: var(--text-light); line-height: 1.6; margin-bottom: 20px;">\n                        We couldn\'t process your inquiry right now. Please try again or contact us directly.\n                    </p>\n                    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">\n                        <button class="btn btn-outline" onclick="window.location.reload()">Try Again</button>\n                        <a href="https://wa.me/917842239090" target="_blank" class="btn btn-primary">\n                            <i class="fab fa-whatsapp"></i> Contact on WhatsApp\n                        </a>\n                        <a href="tel:+917842239090" class="btn btn-secondary">\n                            <i class="fas fa-phone"></i> Call Us\n                        </a>\n                    </div>\n                </div>\n            ';a?a.innerHTML=o:(alert("Something went wrong. Please try again or contact us via WhatsApp at +91 7842239090."),n.disabled=!1,n.innerHTML=i)}});if("true"===new URLSearchParams(window.location.search).get("submitted")){const t=e.closest(".contact-form-card")||document.querySelector(".contact-form-wrapper");t&&(t.innerHTML='\n                <div style="text-align: center; padding: 40px;">\n                    <i class="fas fa-check-circle" style="font-size: 4rem; color: #00B894; margin-bottom: 20px;"></i>\n                    <h3 style="margin-bottom: 10px;">Message Sent!</h3>\n                    <p style="color: #666;">Thank you for reaching out. We\'ll get back to you within 24 hours.</p>\n                </div>\n            ')}}function initCurriculumTabs(){const e=document.querySelectorAll(".curriculum-tab"),t=document.querySelectorAll(".curriculum-level");0!==e.length&&e.forEach(n=>{n.addEventListener("click",()=>{const i=n.dataset.level;e.forEach(e=>e.classList.remove("active")),n.classList.add("active"),t.forEach(e=>{e.dataset.level===i?e.classList.add("active"):e.classList.remove("active")})})})}function initShareCourse(){const e=document.querySelectorAll(".share-icon");if(0===e.length)return;const t=encodeURIComponent(window.location.href),n=(encodeURIComponent(document.title),encodeURIComponent(`Check out this course: ${document.title}`));e.forEach(e=>{e.addEventListener("click",i=>{i.preventDefault();let a="";switch(e.dataset.share){case"linkedin":a=`https://www.linkedin.com/sharing/share-offsite/?url=${t}`,window.open(a,"_blank","width=600,height=500");break;case"instagram":return copyToClipboard(window.location.href,e),void alert("Link copied! You can now paste it in your Instagram story or bio.");case"sms":const i=`Check out this course at Abhi's Craft Soft: ${window.location.href}`;a=`sms:?body=${encodeURIComponent(i)}`,window.location.href=a;break;case"twitter":a=`https://twitter.com/intent/tweet?url=${t}&text=${n}`,window.open(a,"_blank","width=600,height=400");break;case"copy":copyToClipboard(window.location.href,e)}})})}function copyToClipboard(e,t){navigator.clipboard.writeText(e).then(()=>{const e=t.innerHTML;t.classList.add("copied"),t.innerHTML='<i class="fas fa-check"></i>',setTimeout(()=>{t.classList.remove("copied"),t.innerHTML=e},2e3)}).catch(n=>{const i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),t.classList.add("copied"),setTimeout(()=>t.classList.remove("copied"),2e3)})}function initChatWidget(){const e=document.getElementById("chatWidget"),t=document.getElementById("chatToggle");e&&t&&(t.addEventListener("click",()=>{e.classList.toggle("active")}),document.addEventListener("click",t=>{!e.contains(t.target)&&e.classList.contains("active")&&e.classList.remove("active")}),document.addEventListener("keydown",t=>{"Escape"===t.key&&e.classList.contains("active")&&e.classList.remove("active")}))}animationStyles.textContent="\n    .animate-element {\n        opacity: 0;\n        transform: translateY(30px);\n        transition: opacity 0.6s ease, transform 0.6s ease;\n    }\n    \n    .animate-element.animate-in {\n        opacity: 1;\n        transform: translateY(0);\n    }\n    \n    .feature-card:nth-child(2), .course-card:nth-child(2), .advantage-card:nth-child(2),\n    .testimonial-card:nth-child(2) {\n        transition-delay: 0.1s;\n    }\n    \n    .feature-card:nth-child(3), .course-card:nth-child(3), .advantage-card:nth-child(3),\n    .testimonial-card:nth-child(3) {\n        transition-delay: 0.2s;\n    }\n    \n    .feature-card:nth-child(4), .course-card:nth-child(4), .advantage-card:nth-child(4) {\n        transition-delay: 0.3s;\n    }\n    \n    .advantage-card:nth-child(5) {\n        transition-delay: 0.4s;\n    }\n    \n    .advantage-card:nth-child(6) {\n        transition-delay: 0.5s;\n    }\n",document.head.appendChild(animationStyles);