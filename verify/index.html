<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Verify your official receipts and payment statements from Abhi's Craftsoft. Secure verification portal for students and clients.">
    <title>Verify Receipt - Abhi's Craftsoft | Official Verification Portal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Italianno&family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="stylesheet" href="../assets/css/master.css?v=2.0">
    <link rel="stylesheet" href="../assets/css/pages/all-pages.css?v=1.1">
    <link rel="stylesheet" href="verify.css?v=1.0">

    <!-- PDF Generation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- FOUC Protection -->
    <style>
        .no-fouc {
            opacity: 0;
        }

        body {
            transition: opacity 0.3s ease;
        }

        /* Security: Prevent text selection and copying on receipt */
        .receipt-result-container {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }

        /* Disable printing of receipt */
        @media print {
            .receipt-result-container {
                display: none !important;
            }

            body::before {
                content: 'Printing receipts is not allowed. Please contact admin for an official copy.';
                display: block;
                padding: 50px;
                text-align: center;
                font-size: 18px;
            }
        }
    </style>

    <script>
        document.documentElement.className += ' no-fouc';
        document.addEventListener('DOMContentLoaded', function () {
            document.documentElement.classList.remove('no-fouc');
        });
    </script>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar" id="navbar">
        <div class="container nav-container">
            <a href="../" class="logo">
                <span class="logo-text"><span class="logo-signature">Abhi's</span> <span class="highlight">Craft
                        Soft</span></span>
            </a>
            <ul class="nav-menu" id="nav-menu">
                <div class="mobile-menu-header">
                    <div class="logo">
                        <span class="logo-text"><span class="logo-signature">Abhi's</span> <span class="highlight">Craft
                                Soft</span></span>
                    </div>
                    <button class="nav-close" id="navClose" aria-label="Close menu">&times;</button>
                </div>
                <li><a href="../" class="nav-link">Home</a></li>
                <li><a href="../about/" class="nav-link">About</a></li>
                <li><a href="../courses/" class="nav-link">Courses</a></li>
                <li><a href="../acs_services/" class="nav-link">Services</a></li>
                <li><a href="../contact/" class="nav-link">Contact</a></li>
            </ul>
            <button class="hamburger" id="hamburger" aria-label="Toggle menu">
                <span class="bar"></span><span class="bar"></span><span class="bar"></span>
            </button>
        </div>
        <div class="nav-overlay" id="navOverlay"></div>
    </nav>

    <!-- Page Header -->
    <header class="page-header">
        <div class="container">
            <div class="page-header-content">
                <span class="section-tag">Verification Portal</span>
                <h1>Verify Your <span class="gradient-text">Receipt</span></h1>
                <p>Securely verify your official course enrollment and payment records from Abhi's Craftsoft.</p>
            </div>
        </div>
    </header>

    <!-- Breadcrumbs -->
    <nav class="breadcrumbs" aria-label="Breadcrumb">
        <div class="container">
            <ol class="breadcrumb-list">
                <li><a href="../"><i class="fas fa-home"></i> Home</a></li>
                <li class="current">Verify Receipt</li>
            </ol>
        </div>
    </nav>

    <!-- Verification Section -->
    <section class="verify-section">
        <div class="container">
            <div class="verify-wrapper">
                <!-- Search Box -->
                <div class="search-container">
                    <div class="search-box">
                        <i class="fas fa-id-card-alt search-icon"></i>
                        <input type="text" id="verify-id" placeholder="Enter Student / Client ID" autocomplete="off">
                        <button id="find-receipt-btn" class="btn btn-primary"><span class="btn-text">Find
                                Receipt</span></button>
                    </div>
                    <p class="search-hint">Enter the ID provided to you during enrollment.</p>
                </div>


                <!-- Placeholder -->
                <div id="verify-placeholder" class="verify-status-box">
                    <div class="status-icon"><i class="fas fa-shield-alt"></i></div>
                    <p>Enter your ID above to verify your records.</p>
                </div>


                <!-- Loading State (Mini Skeleton) -->
                <div id="verify-loading" class="verify-loading-skeleton hidden">
                    <div class="skeleton-receipt">
                        <div class="skeleton-line full"></div>
                        <div class="skeleton-line half"></div>
                        <div class="skeleton-line full"></div>
                        <div class="skeleton-line full"></div>
                    </div>
                </div>

                <!-- Result Card (Mini Skeleton) -->
                <div id="receipt-result" class="receipt-result-container hidden">
                    <!-- Receipts Header -->
                    <div class="receipts-header">
                        <h3 id="receipts-title">Receipts</h3>
                        <span class="receipts-count" id="receipts-count">0 records</span>
                    </div>

                    <!-- Receipts List (dynamically populated) -->
                    <div class="receipts-list" id="receipts-list">
                        <!-- Receipt cards will be inserted here by JS -->
                    </div>

                </div>


                <!-- No Payments State -->
                <div id="no-payments-state" class="verify-status-box no-payments-box hidden">
                    <div class="status-icon"><i class="fas fa-wallet"></i></div>
                    <h3>No Payments Found</h3>
                    <p id="no-payments-name"></p>
                </div>


                <!-- Error Modal -->
                <div id="error-modal" class="error-modal-overlay hidden">
                    <div class="error-modal">
                        <div class="error-modal-icon"><i class="fas fa-exclamation-circle"></i></div>
                        <h3>Record Not Found</h3>
                        <p>We couldn't find any receipt matching that ID. Please check and try again, or contact admin
                            for assistance.</p>
                        <button class="btn btn-primary" id="close-error-modal">Try Again</button>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Footer -->
    <div id="footer-placeholder"></div>
    <script src="../assets/components/footer/footer.js"></script>

    <!-- Supabase & Custom JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../assets/js/supabase-website-config.js?v=1.0"></script>
    <script src="../assets/js/main.js?v=1.1"></script>
    <script src="verify.js?v=1.0"></script>
</body>

</html>

